<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Viaggio in Bretagna - Agosto 2025</title>
  <style>
    /* Breton inspired color palette */
    :root {
      --black: #000000;
      --white: #ffffff;
      --blue: #0055a4; /* deep blue Breton flag */
      --light-blue: #a7c7e7;
      --grey-light: #f9f9f9;
      --text-dark: #212121;
      --border-radius: 10px;
      --shadow-light: rgba(0, 0, 0, 0.1);
      --bretonPattern: url('https://www.transparenttextures.com/patterns/brushed-alum.png');
      --highlight-bg: #e1ecf9;
    }

    @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400&family=Open+Sans:wght@400;600&display=swap');

    /* Reset box sizing */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: var(--grey-light);
      background-image: var(--bretonPattern);
      color: var(--text-dark);
      scroll-behavior: smooth;
    }

    header {
      background: linear-gradient(135deg, var(--blue), var(--light-blue));
      padding: 3rem 1rem 1rem;
      text-align: center;
      box-shadow: 0 4px 10px var(--shadow-light);
      color: var(--white);
      font-family: 'Merriweather', serif;
      text-shadow: 1px 1px 6px rgba(0,0,0,0.4);
      position: relative;
      z-index: 100;
    }

    header h1 {
      margin: 0 0 0.5rem;
      font-size: 2.8rem;
      font-weight: 900;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      line-height: 1.2;
      border-bottom: 4px solid var(--white);
      display: inline-block;
      padding-bottom: 0.3em;

      position: sticky; /* Make the title sticky */
      top: 0;
      background: linear-gradient(135deg, var(--blue), var(--light-blue));
      padding-top: 0.8rem;
      padding-bottom: 0.3rem;
      z-index: 101;
    }

    header p {
      font-size: 1.3rem;
      font-weight: 600;
      margin: 0 auto 1rem;
      max-width: 700px;
      font-style: italic;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    }

    main.container {
      max-width: 900px;
      margin: 3rem auto 4rem;
      padding: 0 1rem;
    }

    /* Search filter input */
    #filter-container {
      margin-bottom: 1.5rem;
      text-align: center;
    }
    #filter {
      font-size: 1rem;
      padding: 0.4rem 0.6rem;
      border-radius: var(--border-radius);
      border: 2px solid var(--blue);
      width: 100%;
      max-width: 320px;
      transition: border-color 0.3s ease;
    }
    #filter:focus {
      outline: none;
      border-color: #003a71;
    }

    article.tappa {
      background-color: var(--white);
      border-radius: var(--border-radius);
      box-shadow: 0 8px 18px var(--shadow-light);
      margin-bottom: 2.5rem;
      overflow: hidden;
      display: flex;
      gap: 1.5rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
      cursor: default;
    }
    article.tappa.highlight {
      background-color: var(--highlight-bg);
      box-shadow: 0 16px 30px rgba(0, 85, 164, 0.3);
      transform: scale(1.05);
    }
    article.tappa:hover,
    article.tappa:focus-within {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.15);
      outline: none;
    }

    article.tappa img {
      width: 45%;
      max-width: 300px;
      object-fit: cover;
      border-radius: var(--border-radius);
      transition: transform 0.3s ease;
      flex-shrink: 0;
      filter: drop-shadow(2px 4px 4px rgba(0,0,0,0.1));
    }
    article.tappa img:hover {
      transform: scale(1.05);
    }

    article.tappa > div {
      padding: 1.2rem 1rem 1.2rem 0;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    article.tappa h3 {
      margin-top: 0;
      font-family: 'Merriweather', serif;
      color: var(--blue);
      font-weight: 700;
      font-size: 1.8rem;
      border-bottom: 3px solid var(--blue);
      padding-bottom: 0.25rem;
      margin-bottom: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    article.tappa p {
      margin: 0;
      font-size: 1.1rem;
      line-height: 1.5;
      color: var(--text-dark);
    }

    /* Non-clickable labels */
    article.tappa p strong {
      color: var(--text-dark);
      font-weight: 700;
      cursor: default;
      text-decoration: none;
    }

    /* Clickable links styling */
    a {
      color: var(--blue);
      text-decoration: underline;
      font-weight: 700;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    a:hover,
    a:focus {
      color: #003a71;
      outline: none;
    }

    @media (max-width: 700px) {
      article.tappa {
        flex-direction: column;
      }
      article.tappa img {
        width: 100%;
        max-width: 100%;
        border-radius: var(--border-radius) var(--border-radius) 0 0;
        margin-bottom: 1rem;
      }
      article.tappa > div {
        padding: 0 1rem 1.5rem;
      }
    }

    article.tappa:focus-visible {
      outline: 3px solid var(--blue);
      outline-offset: 3px;
    }

    /* Back to top button */
    #backToTop {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background-color: var(--blue);
      color: var(--white);
      border: none;
      padding: 0.7rem 1rem;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 10px var(--shadow-light);
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      font-weight: 700;
      font-size: 1.1rem;
      z-index: 999;
      user-select: none;
    }
    #backToTop.show {
      opacity: 1;
      pointer-events: auto;
    }
    #backToTop:focus {
      outline: 3px solid #003a71;
      outline-offset: 2px;
    }

    /* Map container styling */
    #map {
      height: 450px;
      max-width: 900px;
      margin: 0 auto 4rem;
      border-radius: var(--border-radius);
      box-shadow: 0 8px 18px var(--shadow-light);
    }
  </style>

  <!-- Leaflet CSS from CDN -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
</head>
<body>
  <header>
    <h1 id="main-title">Viaggio in Francia</h1>
    <p id="subtitle">Un tour on the road di 9 giorni / 8 notti tra cultura, paesaggi, relax e .. monellate!</p>
  </header>

  <main class="container" role="main" aria-label="Programma del viaggio in Bretagna agosto 2025">
 <article class="tappa" tabindex="0" aria-labelledby="giorno1">
    <img src="1.jfif" alt="Abbazia di San Michele" loading="lazy" />
    <div>
      <h3 id="giorno1">1° Giorno: Sabato 9 agosto 2025</h3>
      <p><strong>Tragitto:</strong> Genova → Saint-Just-en-Chevalet (600 km – 7 h)<br />
      <strong>Attrazioni:</strong> <a href="https://www.sacradisanmichele.com/" target="_blank" rel="noopener noreferrer">Sacra di San Michele</a> (passaggio) • <a href="https://www.franciaturismo.net/alvernia-rodano-alpi/chambery/" target="_blank" rel="noopener noreferrer">Chambéry</a><br />
      <strong>Pernottamento:</strong> <a href="https://www.hotel-la-poste-loire.com/" target="_blank" rel="noopener noreferrer">Hotel Restaurant de la Poste</a> (Hotel diretto)<br />
      Cena in Hotel prenotata</p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno2">
    <img src="2.jfif" alt="Castello di Chenonceau" loading="lazy" />
    <div>
      <h3 id="giorno2">2° Giorno: Domenica 10 agosto 2025</h3>
      <p><strong>Tragitto:</strong> Saint-Just-en-Chevalet → Châtellerault (450 km – 4 h 30)<br />
      <strong>Attrazioni:</strong> <a href="https://www.franciaturismo.net/loira/bourges/" target="_blank" rel="noopener noreferrer">Bourges</a> • <a href="https://www.chenonceau.com/" target="_blank" rel="noopener noreferrer">Castello di Chenonceau</a><br />
      <strong>Pernottamento:</strong> <a href="https://www.airbnb.it/rooms/881718005617053091" target="_blank" rel="noopener noreferrer">Cottage della Grisonnière</a> (AirBnb)</p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno3">
    <img src="3.jfif" alt="Parco Futuroscope" loading="lazy" />
    <div>
      <h3 id="giorno3">3° Giorno: Lunedì 11 agosto 2025</h3>
      <p><strong>Attività:</strong> Giornata intera al <a href="https://www.futuroscope.com/" target="_blank" rel="noopener noreferrer">Parco Futuroscope</a><br />
      Pranzo a Futuroscope SpaceLoop <strong>ore 14.00</strong></p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno4">
    <img src="4.jfif" alt="Dinan, Bretagna" loading="lazy" />
    <div>
      <h3 id="giorno4">4° Giorno: Martedì 12 agosto 2025</h3>
      <p><strong>Tragitto:</strong> Châtellerault → Cherrueix (400 km – 4 h)<br />
      <strong>Attrazioni:</strong> <a href="https://www.valdeloire-france.com/" target="_blank" rel="noopener noreferrer">Valle della Loira</a> • <a href="https://www.franciaturismo.net/bretagna/ille-et-vilaine/rennes/" target="_blank" rel="noopener noreferrer">Rennes</a><br />
      <strong>Pernottamento:</strong> <a href="https://www.airbnb.it/rooms/1422590903034601750" target="_blank" rel="noopener noreferrer">Casa tipica a Cherrueix</a> (AirBnb)</p>
      Cena suggerita al <a href="https://www.moncommerce35.fr/ker-nouna-cherrueix" target="_blank" rel="noopener noreferrer">Ker Nouna</a> martedì 19-21</p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno5">
    <img src="5.jfif" alt="Mont Saint-Michel" loading="lazy" />
    <div>
      <h3 id="giorno5">5° Giorno: Mercoledì 13 agosto 2025</h3>
      <p><strong>Mattina:</strong> Giro ad anello con visita di <a href="https://www.ville-saint-malo.fr/" target="_blank" rel="noopener noreferrer">Saint-Malo</a> • <a href="https://www.ville-cancale.fr/" target="_blank" rel="noopener noreferrer">Cancale</a><br />
      <strong>Pomeriggio:</strong> Visita a <a href="https://www.ot-montsaintmichel.com/" target="_blank" rel="noopener noreferrer">Mont Saint-Michel</a> con <em>visita guidata dell'Abbazia alle ore 16:45</em></p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno6">
    <img src="6.jfif" alt="Cap Fréhel, Bretagna" loading="lazy" />
    <div>
      <h3 id="giorno6">6° Giorno: Giovedì 14 agosto 2025</h3>
      <p><strong>Mattina:</strong> Giro ad anello con visita di <a href="https://www.bretagna-vacanze.com/destinazioni/alla-scoperta-delle-destinazioni/capo-frehel-saint-malo-baiai-del-mont-saint-michel/cap-frehel-fort-lalatte/" target="_blank" rel="noopener noreferrer">Cap Fréhel e Fort Lalatte</a><br />
      <strong>Pomeriggio:</strong> Continuazione giro con visita di <a href="https://www.franciaturismo.net/bretagna/cotes-darmor/dinan/" target="_blank" rel="noopener noreferrer">Dinan</a></p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno7">
    <img src="7.jfif" alt="Castello di Chambord" loading="lazy" />
    <div>
      <h3 id="giorno7">7° Giorno: Venerdì 15 agosto 2025</h3>
      <p><strong>Tragitto:</strong> Cherrueix → Neuillé-le-Lierre (350 km – 4 h)<br />
      <strong>Attrazioni:</strong> <a href="https://www.franciaturismo.net/loira/le-mans/" target="_blank" rel="noopener noreferrer">Le Mans</a><br />
      <strong>Pernottamento:</strong> <a href="https://www.lamauguiniere.com/" target="_blank" rel="noopener noreferrer">Chambres d'hôtes de la Mauguinière</a> (Hotel Booking)<br />
      Alla sera cena e passeggiata a <a href="https://www.franciaturismo.net/loira/tours/" target="_blank" rel="noopener noreferrer">Tours</a></p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno8">
    <img src="8.jfif" alt="Vézelay" loading="lazy" />
    <div>
      <h3 id="giorno8">8° Giorno: Sabato 16 agosto 2025</h3>
      <p><strong>Tragitto:</strong> Neuillé-le-Lierre → Liddes (700 km – 7 h)<br />
      <strong>Attrazioni:</strong> <a href="https://www.vezelaytourisme.com/" target="_blank" rel="noopener noreferrer">Vézelay</a> • <a href="https://www.ot-auxerre.com/destination-lauxerrois/destination-history/must-see-monuments/saint-etienne-cathedral/" target="_blank" rel="noopener noreferrer">Cathédrale d'Auxerrey</a> • <a href="https://www.bainsdesaillon.ch/" target="_blank" rel="noopener noreferrer">Terme di Martigny</a><br />
      <strong>Pernottamento:</strong> <a href="https://hotel-gd-st-bernard.ch/" target="_blank" rel="noopener noreferrer">Hôtel du Grand-Saint-Bernard</a> (Hotel Booking)</p>
    </div>
  </article>

  <article class="tappa" tabindex="0" aria-labelledby="giorno9">
    <img src="9.jfif" alt="Passo del Gran San Bernardo" loading="lazy" />
    <div>
      <h3 id="giorno9">9° Giorno: Domenica 17 agosto 2025</h3>
      <p><strong>Tragitto:</strong> Liddes → Genova (300 km – 4 h)<br />
      <strong>Attrazioni:</strong> <a href="https://www.fondation-barry.ch/it/esperienze/il-passo-del-gran-san-bernardo-84/" target="_blank" rel="noopener noreferrer">Passo del Gran San Bernardo</a></p>
    </div>
  </article>
</main>

  <section aria-label="Mappa dei punti di interesse del tour" style="max-width:900px; margin:0 auto 4rem; padding:0 1rem;">
    <h2 style="font-family: 'Merriweather', serif; color: var(--blue); text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700; font-size:1.8rem; margin-bottom: 0.75rem; border-bottom: 3px solid var(--blue); padding-bottom: 0.2em;">Mappa del Tour</h2>
    <div id="map" role="region" aria-label="Mappa interattiva con luoghi visitati"></div>
  </section>

  <button id="backToTop" aria-label="Torna su">↑ Top</button>

  <!-- Leaflet JS from CDN -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  ></script>

  <script>
    // Back to top button
    const backToTopBtn = document.getElementById('backToTop');

    window.addEventListener('scroll', () => {
      if (window.scrollY > window.innerHeight / 2) {
        backToTopBtn.classList.add('show');
      } else {
        backToTopBtn.classList.remove('show');
      }
    });

    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Highlight current article in viewport while scrolling
    const articles = document.querySelectorAll('article.tappa');

    function highlightCurrentArticle() {
      const viewportHeight = window.innerHeight;
      let found = false;
      articles.forEach(article => {
        const rect = article.getBoundingClientRect();
        const top = rect.top;
        const bottom = rect.bottom;
        if (top <= viewportHeight * 0.5 && bottom >= viewportHeight * 0.3 && !found) {
          article.classList.add('highlight');
          found = true;
        } else {
          article.classList.remove('highlight');
        }
      });
    }

    window.addEventListener('scroll', highlightCurrentArticle);
    window.addEventListener('load', highlightCurrentArticle);

    // Accessibility: add visually-hidden class for label
    const style = document.createElement('style');
    style.textContent = `.visually-hidden { 
      position: absolute !important; 
      height: 1px; 
      width: 1px; 
      overflow: hidden; 
      clip: rect(1px, 1px, 1px, 1px); 
      white-space: nowrap; 
    }`;
    document.head.appendChild(style);

    // Leaflet map initialization with POIs
    const map = L.map('map').setView([47.0, 2.5], 5); // Centered on France approx

    // Tile layer from OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution:
        '&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener noreferrer">OpenStreetMap</a> contributors',
    }).addTo(map);

    // Points of Interest with coordinates and label
    const pois = [
      { name: "Chambéry", coords: [45.5646, 5.9178], url:"https://www.chambery.fr/" },
      { name: "Bourges", coords: [47.0810, 2.3988], url:"https://www.ville-bourges.fr/" },
      { name: "Castello di CHENONCEAU", coords: [47.3240, 1.0708], url:"https://www.chenonceau.com/" },
      { name: "Futuroscope", coords: [46.6670, 0.3695], url:"https://www.futuroscope.com/" },
      { name: "Mont Saint-Michel", coords: [48.6361, -1.5115], url:"https://www.ot-montsaintmichel.com/" },
      { name: "Saint Malo", coords: [48.6493, -2.0259], url:"https://www.ville-saint-malo.fr/" },
      { name: "Cancale", coords: [48.6634, -1.8609], url:"https://www.ville-cancale.fr/" },
      { name: "Fort Lalatte", coords: [48.6494, -2.1748], url:"https://www.bretagna-vacanze.com/destinazioni/alla-scoperta-delle-destinazioni/capo-frehel-saint-malo-baiai-del-mont-saint-michel/cap-frehel-fort-lalatte/" },
      { name: "Dinan", coords: [48.4541, -2.0470], url:"https://www.bretagna-vacanze.com/destinazioni/alla-scoperta-delle-destinazioni/capo-frehel-saint-malo-baiai-del-mont-saint-michel/dinan/" },
      { name: "Rennes", coords: [48.1173, -1.6778], url:"https://www.franciaturismo.net/bretagna/ille-et-vilaine/rennes/" },
      { name: "Vézelay", coords: [47.4648, 3.7593], url:"https://www.vezelaytourisme.com/" },
      { name: "Bains des Saillon (Terme di Martigny)", coords: [46.1133, 7.0820], url:"https://www.bainsdesaillon.ch/" },
      { name: "Passo Gran San Bernardo", coords: [45.8697, 7.1653], url:"https://www.fondation-barry.ch/it/esperienze/il-passo-del-gran-san-bernardo-84/" }
    ];

    // Create markers group for fitBounds
    const markers = [];

    pois.forEach(poi => {
      const marker = L.marker(poi.coords).addTo(map);
      const popupContent = `<strong>${poi.name}</strong><br><a href="${poi.url}" target="_blank" rel="noopener noreferrer">Sito ufficiale</a>`;
      marker.bindPopup(popupContent);
      markers.push(marker);
    });

    // Adjust map to fit all POIs comfortably with some padding
    const group = new L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.2));

  </script>
</body>
</html>



